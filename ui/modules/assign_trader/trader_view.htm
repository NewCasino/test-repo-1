<div class="panel-frame">
    <table class="table">
        <thead>
            <tr>
                <th>
                    <h4 class="panel-title">Traders Assigned for Date : <span class="navy">{{ctrl.vm.date}}</span></h4>
					<span class="pull-right">
						<button type="button" class="btn btn-small btn-success" ng-click="ctrl.closeEvents()">Events</button> &nbsp; 
						<button type="button" class="btn btn-small btn-info" ng-click="ctrl.export()">Export</button>
					</span>				
                </th>
            </tr>
        </thead>
        <tbody id="trader-view">
            <tr>
                <td>
                    <table-scroller offset="180">
                       <table class="table table-striped list-table">
                            <thead>
                                <tr>
                                    <th width="88px">Trader</th>                                
                                    <th width="48px">Country</th>
                                    <th width="48px">Type</th>
                                    <th width="48px">&nbsp;</th>
                                    <th>Meeting</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat-start="item in ctrl.traderAssignments | filter: ctrl.vm.typeFilter" class="list-row" >
                                    <td>{{item.Trader}}</td>                                
                                    <td><img src="/img/{{item.Country}}.jpg" border="0" /></td>
                                    <td><img src="/img/{{item.Type}}.png" border="0" /></td>
                                    <td><span class="pointer" ng-class="(!item.showEvents) ? 'glyphicon glyphicon-triangle-bottom' : 'glyphicon glyphicon-triangle-top'" ng-click="item.showEvents=!item.showEvents"></span></td>
                                    <td>{{item.Venue}} - {{item.MeetingDate | utcToDisplayDate}}</td>                                
                                </tr>
                                <tr ng-if="item.showEvents" ng-repeat-end="">
                                    <td colspan="6">
                                        <table class="table table-striped list-table">                                          
                                            <tbody>
                                                <tr ng-repeat="event in item.Events">
                                                    <td width="148px">&nbsp;</td>
                                                    <td width="88px">R{{event.event}}</td>
                                                    <td width="98px">{{event.start | toDisplayTime}}</td>
                                                    <td><label class="orange">Roles: &nbsp; &nbsp; </label>{{event.envrole.join(', ')}}</td>
                                                </tr>
                                            </tbody>                                                
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                     <table-scroller>
                </td>
            </tr>
        <tbody>
    </table>
</div>
